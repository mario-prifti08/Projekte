(()=>{"use strict";const e=e=>{const t=["skip","logo","fav-icon"];for(const n of t)if(e.includes(n))return!0;return!1};Object.seal({linearTween:(e,t,n,o)=>n*e/o+t,easeInQuad:(e,t,n,o)=>n*(e/=o)*e+t,easeOutQuad:(e,t,n,o)=>-n*(e/=o)*(e-2)+t,easeInOutQuad:(e,t,n,o)=>(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t,easeInCubic:(e,t,n,o)=>n*(e/=o)*e*e+t,easeOutCubic:(e,t,n,o)=>(e/=o,n*(--e*e*e+1)+t),easeInOutCubic:(e,t,n,o)=>(e/=o/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t});let t=0,n=0,o=0;const a=(e,t)=>{const o=e.scrollTop,a=t-o,l=4*Math.sign(a);let r=0;const i=function(){r+=l;const a=o+r;e.scrollTop=a,l>0&&a<t||l<0&&a>t?n=setTimeout(i,l):clearTimeout(n)};i()};let l;const r=(e,t)=>{if(!e)return"";if(e){const n=e.match(/'([^']+)'/);return n?n[1]:"inherit"===e?t:e}return t||void 0};let i=!1;const s=e=>{const t=document.querySelectorAll("#ast-desktop-header, #ast-mobile-header");for(const[,n]of Object.entries(t)){const t=n.querySelectorAll(".ast-site-identity")[0].querySelectorAll(".ast-site-title-wrap")[0];t&&(t.style.display=e?"block":"none")}i=!e},c=(()=>{let e=!1;return()=>{if(e)return;const t=document.querySelectorAll("a, button");t.forEach(((n,o)=>{"A"===n.tagName&&n.removeAttribute("href"),n.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation()})),o===t.length-1&&(e=!0)}))}})(),d=(e,t)=>{const n=document.createElement("span");n.classList.add("site-logo-img");const o=document.createElement("a");o.setAttribute("class","custom-logo-link"),o.setAttribute("href","#"),o.setAttribute("aria-current","page"),n.appendChild(o);const a=document.createElement("img");return a.classList.add("custom-logo"),a.setAttribute("src",e),o.appendChild(a),""!==t&&(a.style.width=t+"px",a.style.maxWidth=t+"px"),n};document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("message",(async function(u){const p=new URL(u.origin).hostname;if("localhost"!==p&&p.includes("zipwp.com"),u.data&&"zipwpPreviewDispatch"===u.data.call){c(),(()=>{if(document.getElementById("zipwp-template-preview-scrollbar-style"))return;const e=document.createElement("style");e.id="zipwp-template-preview-scrollbar-style",e.setAttribute("rel","stylesheet"),e.innerHTML="\n\t\t::-webkit-scrollbar {\n\t\t\twidth: 6px;\n\t\t\theight: 128px;\n\t\t}\n\t\t\n\t\t::-webkit-scrollbar-thumb {\n\t\t\topacity: 0.2;\n\t\t\tbackground: var(--dark-app-background, rgba(31, 39, 51, 0.2));\n\t\t}\n\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\topacity: 0.25;\n\t\t\tbackground: var(--dark-app-background, rgba(31, 39, 51, 0.4));\n\t\t}\n\t",document.head.appendChild(e)})();const p=u.data.value.param,g=u.data;switch(p){case"images":const c=u.data.value.data;if(void 0===c)return;try{Object.keys(c).length>0&&await(n=>new Promise(((o,a)=>{const l=document.getElementById("uagb-style-frontend-"+zipwp_template_preview.post_id);if(!l)return a("No style element found");const r=l.textContent.replace(/background-image\s*:\s*url\(['"]?([^'")]+)['"]?\)/g,(function(o,a){if(e(a))return o;if(void 0===n[t])return o;const l=n[t]?.url;return t++,void 0===n[t]&&(t=0),'background-image: url("'+l+'")'}));l.textContent=r,o("Background images replaced")})))(c||[]),await((n,o)=>new Promise(((a,l)=>{if(0===Object.keys(n).length)return l("No images");const r=document.querySelectorAll("#content img");for(const a of r){if(e(a.src))continue;const l=n[t];if(void 0===l)continue;t++,void 0===n[t]&&(t=0);const r=document.createElement("img");r.src="full"===o?.data?.value?.preview_type?l.url:l.optimized_url,a.parentNode.replaceChild(r,a)}a("Images replaced")})))(c,u)}catch(e){}(({call:e="zipwpParentPreviewDispatch",action:t="",payload:n=""})=>{window.parent.postMessage({call:e,value:{param:t,...n&&{data:n}}},"*")})({action:"images-replaced",payload:window.location.hostname});break;case"template-hover":const{data:p}=u.data.value,f=p.action;"scroll-start"===f?(()=>{const e=document.querySelector("html");n&&clearTimeout(n),o=setTimeout((()=>{a(e,e.scrollHeight)}),500)})():"scroll-stop"===f&&(()=>{const e=document.querySelector("html");o&&clearTimeout(o),n&&clearTimeout(n),a(e,0)})();break;case"content":const{data:y,businessName:b}=u.data.value;y.forEach((function(e){const t=e.fallback,n=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1);let o;for(;o=n.nextNode();)o.textContent.includes(t)&&(o.textContent=o.textContent.replace(t,e.value))}));const w=document.querySelectorAll(".site-title a");let v="";w.length>0&&(v=w[0].textContent?.trim());for(const[,e]of Object.entries(w))e&&b&&(e.textContent=b);const k=document.querySelector(".ast-footer-copyright p");if(k&&b){const e=k.textContent;k.textContent=e.replace(v,b)}break;case"contactInfo":const{data:A}=u.data.value;A.forEach((function(e){if(!e.value)return;const t=e.fallback,n=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1);let o;for(;o=n.nextNode();)o.textContent.includes(t)&&(o.textContent=o.textContent.replace(t,e.value))}));break;case"siteLogo":const E=document.querySelectorAll(".site-logo-img img");void 0===l&&(l=(()=>{const e={url:"",width:"",height:"",srcSet:""},t=document.querySelector(".site-logo-img img");return t&&(e.url=t.getAttribute("src"),e.width=t.getAttribute("width"),e.height=t.getAttribute("height"),e.srcSet=t.getAttribute("srcset")),e})());let C=g.value.data.url||l.url;if(C=g.value.data.dataUri||C,0===E.length&&""!==C){const e=document.querySelectorAll("#ast-desktop-header, #ast-mobile-header");for(const[,t]of Object.entries(e)){var m;const e=t.querySelectorAll(".ast-site-identity")[0],n=e.querySelectorAll(".ast-site-title-wrap")[0];e.insertBefore(d(C,null!==(m=g?.value?.data?.width)&&void 0!==m?m:""),n)}}else for(const[,e]of Object.entries(E)){let t="";var h;C===l.url&&l?.srcSet?(e.setAttribute("srcset",l.srcSet),t=null!==(h=l?.width)&&void 0!==h?h:""):(e.removeAttribute("srcset"),t=g.value.data.width||""),e.setAttribute("src",C),!C&&i&&s(!0),""!==t&&(e.style.width=t+"px",e.style.maxWidth=t+"px")}break;case"colorPalette":const z=g.value.data.colors||[],x=zipwp_template_preview.AstColorPaletteVarPrefix,S=zipwp_template_preview.AstEleColorPaletteVarPrefix;if(0===z.length){document.querySelector("body").classList.remove("zipwp-template-preview-palette");const e=document.getElementsByClassName("zipwp-template-preview-palette");return void(e.length>0&&e[0].remove())}document.querySelector("body").classList.add("zipwp-template-preview-palette");const T=Object.entries(z).map(((e,t)=>[`--e-global-color-${S[t].replace(/-/g,"")}: ${e[1]};`,`${x}${t}: ${e[1]};`])).map((e=>e.join(""))).join("");let q=document.getElementById("zipwp-template-preview-palette-css");q||(q=document.createElement("style"),q.id="zipwp-template-preview-palette-css",q.setAttribute("rel","stylesheet"),document.head.appendChild(q)),q.innerHTML=`.zipwp-template-preview-palette{ ${T} }`;break;case"siteTypography":if(!Object.keys(g.value.data).length){const e=document.getElementById("zipwp-template-typography");return void(e&&e.remove())}(e=>{if(!e)return;if(!document.getElementById("google-fonts-domain")){const e=document.createElement("link");e.id="google-fonts-domain",e.setAttribute("rel","preconnect"),e.setAttribute("href","https://fonts.gstatic.com"),document.head.appendChild(e)}let t=document.getElementById("zipwp-template-preview-google-fonts-url");t||(t=document.createElement("link"),t.id="zipwp-template-preview-google-fonts-url",t.setAttribute("rel","stylesheet"),document.head.appendChild(t));const n=[];let o=e["body-font-family"]||"",a=parseInt(e["body-font-weight"])||"";a&&(a=`:wght@${a}`),o&&(o=r(o),o=o.replace(" ","+"),n.push(`family=${o}${a}`));let l=e["headings-font-family"]||"",i=parseInt(e["headings-font-weight"])||"";i&&(i=`:wght@${i}`),l&&(l=r(l,o),l=l.replace(" ","+"),n.push(`family=${l}${i}`));const s=`https://fonts.googleapis.com/css2?${n.join("&")}&display=swap`;t.setAttribute("href",s)})(g.value.data),(e=>{if(!e)return;let t=document.getElementById("zipwp-template-typography");t||(t=document.createElement("style"),t.id="zipwp-template-typography",t.setAttribute("rel","stylesheet"),document.head.appendChild(t));let n="";n+="body, button, input, select, textarea, .ast-button, .ast-custom-button {",n+="\tfont-family: "+e["body-font-family"]+";",n+="\tfont-weight: "+e["body-font-weight"]+";",n+="\tfont-size: "+e["font-size-body"].desktop+e["font-size-body"]["desktop-unit"]+";",n+="\tline-height: "+e["body-line-height"]+";",n+="}",n+="h1, .entry-content h1, h2, .entry-content h2, h3, .entry-content h3, h4, .entry-content h4, h5, .entry-content h5, h6, .entry-content h6, .site-title, .site-title a {",n+="\tfont-family: "+e["headings-font-family"]+";",n+="\tline-height: "+e["headings-line-height"]+";",n+="\tfont-weight: "+e["headings-font-weight"]+";",n+="}",["h1","h2","h3","h4","h5","h6"].forEach((t=>{const o="inherit"===e["font-family-"+t]?e["headings-font-family"]:e["font-family-"+t],a="inherit"===e["font-weight-"+t]?e["headings-font-weight"]:e["font-weight-"+t];let l="";void 0!==o&&""!==o&&(l+=`${t}, .entry-content ${t} {`,l+="\tfont-family: "+o+";"),void 0!==e["line-height-"+t]&&""!==e["line-height-"+t]&&(l+="\tline-height: "+e["line-height-"+t]+";"),void 0!==a&&""!==a&&(l+="\tfont-weight: "+a+";"),n+=""!==l?l+"}":""})),t.innerHTML=n})(g.value.data);break;case"siteTitle":s(g.value.data);break;case"clearPreviewAssets":const I=document.getElementById("zipwp-template-typography");I&&I.remove(),document.querySelector("body").classList.remove("zipwp-template-preview-palette");const O=document.getElementsByClassName("zipwp-template-preview-palette");O.length>0&&O[0].remove();break;case"completeOnboarding":localStorage.removeItem("zipwp-template-iframe-preview-data")}}}))}))})();